<!DOCTYPE html>
<html lang="en"     prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml" >

<head>
    <title>Growing an MVVM Framework in 2003, part V—Reflections and Regrets - Blair Conrad</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://blairconrad.com/2011/02/15/growing-an-mvvm-framework-in-2003-part-v-reflections-and-regrets/">

        <meta name="author" content="Blair Conrad" />
        <meta name="keywords" content=".NET,Development,Frameworks,MVVM" />
        <meta name="description" content="This post is from a series on my experiences starting to grow an MVVM Framework in .NET 1.1. * Part I—Event Handlers * Part II — Properties * Part III — Properties Redux * Part IV—Unit Tests * Part V—Reflections and Regrets Full source code can be found in my Google Code repository …" />

        <meta property="og:site_name" content="Blair Conrad" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Growing an MVVM Framework in 2003, part V—Reflections and Regrets"/>
        <meta property="og:url" content="https://blairconrad.com/2011/02/15/growing-an-mvvm-framework-in-2003-part-v-reflections-and-regrets/"/>
        <meta property="og:description" content="This post is from a series on my experiences starting to grow an MVVM Framework in .NET 1.1. * Part I—Event Handlers * Part II — Properties * Part III — Properties Redux * Part IV—Unit Tests * Part V—Reflections and Regrets Full source code can be found in my Google Code repository …"/>
        <meta property="article:published_time" content="2011-02-15" />
            <meta property="article:section" content="Development" />
            <meta property="article:tag" content=".NET" />
            <meta property="article:tag" content="Development" />
            <meta property="article:tag" content="Frameworks" />
            <meta property="article:tag" content="MVVM" />
            <meta property="article:author" content="Blair Conrad" />



    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://blairconrad.com/theme/css/bootstrap.min.css" type="text/css" />

    <link href="https://blairconrad.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blairconrad.com/theme/css/pygments/github.css"
        rel="stylesheet">
    <link href="https://blairconrad.com/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blairconrad.com/theme/css/style.css" type="text/css" />
    <link href="https://blairconrad.com/theme/css/custom.css" rel="stylesheet">

    <link href="https://blairconrad.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
        title="Blair Conrad ATOM Feed" />

    <link href="https://blairconrad.com/feeds/development.atom.xml" type="application/atom+xml" rel="alternate"
        title="Blair Conrad Development ATOM Feed" />
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top"
        role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="https://blairconrad.com/" class="navbar-brand">
Blair Conrad                </a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/Recipes">Recipes</a></li>
                        <li class="active" >
                            <a href="https://blairconrad.com/category/development.html">Development</a>
                        </li>
                        <li >
                            <a href="https://blairconrad.com/category/miscellany.html">Miscellany</a>
                        </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><span>
                            <form class="navbar-search" action="/search.html">
                                <input type="text" class="search-query" placeholder="Search" name="q"
                                    id="tipue_search_input" required>
                            </form>
                        </span>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </div> <!-- /.navbar -->

    <!-- Banner -->
    <!-- End Banner -->

    <!-- Content Container -->
    <div class="container">
        <div class="row">
            <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blairconrad.com/2011/02/15/growing-an-mvvm-framework-in-2003-part-v-reflections-and-regrets/"
                       rel="bookmark"
                       title="Permalink to Growing an MVVM Framework in 2003, part V—Reflections and Regrets">
                        Growing an MVVM Framework in 2003, part V&mdash;Reflections and Regrets
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <!-- <span class="published"> -->
    <i class="fa fa-calendar"></i><time datetime="2011-02-15T00:00:00-05:00"> 2011-02-15</time>
    <!-- </span> -->



    <i class="fa fa-folder"></i>
    <a href="https://blairconrad.com/category/development.html"></i>Development</a>


<i class="fa fa-tags"></i>
<a href="https://blairconrad.com/tag/.net.html">.NET</a>
/
<a href="https://blairconrad.com/tag/development.html">Development</a>
/
<a href="https://blairconrad.com/tag/frameworks.html">Frameworks</a>
/
<a href="https://blairconrad.com/tag/mvvm.html">MVVM</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <div style="padding-left:.5em;padding-right:.5em;margin-left:2em;margin-right:2em;border:1px solid #EEE;background-color:#F8F8F8;">
<p>This post is from a series on my experiences starting to grow an MVVM Framework in .NET 1.1.</p>

* <a href="https://blairconrad.com/2010/10/29/growing-an-mvvm-framework-in-2003-part-i-event-handlers/">Part I&mdash;Event Handlers</a>
* <a href="https://blairconrad.com/2010/11/10/growing-an-mvvm-framework-in-2003-part-ii-properties/">Part II &mdash; Properties</a>
* <a href="https://blairconrad.com/2010/11/21/growing-an-mvvm-framework-in-2003-part-iii-properties-redux/">Part III  &mdash; Properties Redux</a>
* <a href="https://blairconrad.com/2010/11/30/growing-an-mvvm-framework-in-2003-part-iv-unit-tests/">Part IV&mdash;Unit Tests</a>
* Part V&mdash;Reflections and Regrets

<p>Full source code can be found in my <a href="http://code.google.com/p/blairconrad/source/browse/#svn/trunk/BlogExamples/2010-11-mvvm-.net1.1/BookFinder">Google Code repository</a>.</p>
</div>

<p>I haven't added any articles to this series in a while. The main reason is that I've not done any more work on the framework. I was able to complete my application using the tools using the Framework So Far, and I've long since moved on to other projects.  I wanted, though, to take a quick look back and evaluate the project.</p>
<h2>I did it!</h2>

<p>Way back in part&nbsp;1, I said that I wanted to create an application that </p>
<ul>
<li>had testable logic, even in the GUI layer,</li>
<li>had no “codebehind” in the view, and</li>
<li>shunted the tedious wiring up of events and handlers into helpers (or a “framework”)</li>
</ul>
<p>I'm very pleased with how all this turned out. Taking things in reverse order:</p>
<ul>
<li>The little framework does an excellent job of handling the tedious event-wiring. Handling an View event requires nothing more than declaring a method with a convention-following name and the correct signature, such as <code>public void FindClick(object sender, EventArgs e)</code>
Properties are wired up in a similar way, by declaring a public field with a convention-following name and an appropriate type (StringProperty, BoolProperty, or ListProperty).</li>
<li>Aside from setting some properties on View elements (for example, the Find button is initial disabled), there was no need to crack open the View's .cs file&mdash;I never saw the inside of it.</li>
<li>The easily-invoked event handlers and the property bindings made writing unit test as easy as writing tests for a non-GUI component: set some initial properties, poke the ViewModel by invoking an event handler, and check the properties. Done! Injecting mock model components was the hardest thing, and that's no different than in any other test.</li>
</ul>
<h2>If only I had</h2>

<p>There was one nagging problem that I left unresolved. My Model contains only synchronous operations, so the View doesn't update while we're accessing the data store. As it turns out, the operations are very quick, so the user is unlikely to notice. </p>
<p>I could have implemented asynchronous operations on the view, or used delgates or background threads to explicitly invoke the model in the background. I really would've liked to implement something that would be applicable to a larger problem set. Something like <a href="http://devlicio.us/blogs/rob_eisenberg/archive/2010/08/21/caliburn-micro-soup-to-nuts-part-5-iresult-and-coroutines.aspx">Caliburn.Micro's IResult and Coroutines</a>: 
Returning an <code>IResult</code> or a collection of them to be executed on background threads by the framework, while the GUI updates and the ViewModel is none the wiser.</p>
<p>Ah well, time was running out, and there didn't seem to be that much benefit. Maybe next time...</p>
<h2>I would have liked to</h2>

<p>There are a few other "features" that I would've liked to add to the framework, but there wasn't time, nor did there seem to be an immediate need:</p>
<ul>
<li><strong>a View binder</strong> &mdash; After writing a class to bind the ViewModel to the fake storage properties, I realized that that was a nicer approach than having the binding code in the  ViewModelBase. I'd like create a "production binder" to hook up the ViewModel and View.</li>
<li><strong>composable ViewModels</strong> &mdash; BookFinder is very simple, with only a TextBox and a few ListBoxes and Buttons on its View, so a single View and ViewModel was sufficient. It would be useful to be able to build up a more complicated GUI by walking a tree of ViewModels and composing a GUI out of corresponding View components.</li>
<li><strong>deregistering event handlers</strong> &mdash; The framework registers event handlers between the ViewModel and View, with no provision for unregistering them when components are no longer needed. In BookFinder, the single View/ViewModel pair hang around until the application is closed, but in a more complicated application there might be an opportunity to leak resources.</li>
</ul>
<h2>Summing up</h2>

<p>I'm happy with how the framework and tool turned out. I could probably have written the application more quickly if I hadn't bothered trying to extract the framework, but it wouldn't have been as testable (and therefore likely not as well tested). I think the extra effort was worthwhile both because it created a better application and because I learned more about WinForms programming and how I can leverage conventions to reduce programmer workload&mdash;if the framework were used for a second application, development would just fly. And the exercise was fun. Not only writing the framework, but using it &mdash; it's extremely liberating having event handlers just work by creating a properly-named method, and having the handler be immediately testable is a joy. If I had any expectations that I'd be writing similar tools on .NET&nbsp;1.1 again, I'd definitely continue extending the framework.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

            </div>
            <div class="col-sm-3" id="sidebar">
                <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="http://github.com/blairconrad"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
    <li class="list-group-item"><a href="http://twitter.com/hippopottoman"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
    <li class="list-group-item"><a href="https://www.goodreads.com/user/show/1066544-blair-conrad"><i class="fa fa-goodreads-square fa-lg"></i> Goodreads</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->
  </ul>
</section>
<!-- End Sidebar -->                </aside>
            </div>
        </div>
    </div>
    <!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Blair Conrad
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
    <script src="https://blairconrad.com/theme/js/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://blairconrad.com/theme/js/bootstrap.min.js"></script>

    <!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
    <script src="https://blairconrad.com/theme/js/respond.min.js"></script>




</body>

</html>