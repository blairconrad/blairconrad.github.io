<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>Watch your spaces - HTTP Error 500.19 - Internal Server Error | Blair Conrad</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i%7CFira+Code:400,400i,600" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" />
  <link rel="stylesheet" href="https://blairconrad.com/static/site.css" />
  <link rel="canonical" href="https://blairconrad.com/2013/07/02/watch-your-spaces-http-error-500.19-internal-server-error/" />
  <link href="https://blairconrad.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Blair Conrad" />
  <link href="https://blairconrad.com/feeds/development.atom.xml" type="application/atom+xml" rel="alternate" title="Blair Conrad | Development" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
  <meta property="og:site_name" content="Blair Conrad" />
  <meta property="og:title" content="Watch your spaces - HTTP Error 500.19 - Internal Server Error" />
  <meta name="twitter:title" content="Watch your spaces - HTTP Error 500.19 - Internal Server Error" />
  <meta property="og:url" content="https://blairconrad.com/2013/07/02/watch-your-spaces-http-error-500.19-internal-server-error/" />
  <meta property="og:description" content="Late last week at the Day Job, a colleague came to me with a problem. The web service he was trying to hit was throwing an error he&#39;d never seen before: HTTP Error 500.19 - Internal Server Error The requested page cannot be accessed because the related configuration data for …" />
  <meta name="twitter:description" content="Late last week at the Day Job, a colleague came to me with a problem. The web service he was trying to hit was throwing an error he&#39;d never seen before: HTTP Error 500.19 - Internal Server Error The requested page cannot be accessed because the related configuration data for …" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="https://blairconrad.com/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m">Blair Conrad</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-12 m-col-m-none">
            <li><a href="https://blairconrad.com/Recipes/">Recipes</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article>
      
      <header>
          <h1><a href="https://blairconrad.com/2013/07/02/watch-your-spaces-http-error-500.19-internal-server-error/" rel="bookmark" title="Permalink to Watch your spaces - HTTP Error 500.19 - Internal Server Error">
                  Watch your spaces - HTTP Error 500.19 - Internal Server Error
              </a></h1>
              <div class="article-metadata">
                <span><i class="fas fa-calendar"></i><time
                    datetime="2013-07-02T00:00:00-04:00">2013-07-02</time></span>
                <span><i class="fas fa-folder"></i><a
                    href="https://blairconrad.com/category/development.html"></i>Development</a></span>
                <span><i class="fas fa-tags"></i>
                  <a href="https://blairconrad.com/tag/500-19.html">500-19</a>
                  /
                  <a href="https://blairconrad.com/tag/iis.html">iis</a>
                  /
                  <a href="https://blairconrad.com/tag/iis7.html">iis7</a>
                </span>
              </div>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<p>Late last week at the Day Job, a colleague came to me with a problem. The web service he was trying to hit was throwing an error he'd never seen before:</p>
<blockquote style="color:#CC0000;">
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid.
</blockquote>

<p>I'd never seen it before either, at least not in this exact incarnation. Take a look</p>
<p><a href="https://blairconrad.com/images/500-191-internal-server-error.png"><img style="display: block; margin-left: auto; margin-right: auto;" src="https://blairconrad.com/images/500-191-internal-server-error-small.png" alt="screenshot of 500.19 error" width="500" height="334" /></a></p>
<!--more-->

<p>In case the text isn't so clear, here are the details:</p>
<table style="border-collapse:collapse;border:1px solid black;width:50%;margin-left:25%;margin-right:25%;">
<colgroup>
  <col style="background-color:#F8F8F8;" />
  <col/>
</colgroup>
<tr><th style="border:none;padding:1px 3px;">Module</th><td style="border:none;padding:1px 3px;">IpRestrictionModule</td></tr>
<tr><th style="border:none;padding:1px 3px;">Notification</th><td style="border:none;padding:1px 3px;">BeginRequest</td></tr>
<tr><th style="border:none;padding:1px 3px;">Handler</th><td style="border:none;padding:1px 3px;">WebServiceHandlerFactory-Integrated-4.0</td></tr>
<tr><th style="border:none;padding:1px 3px;">Error Code</th><td style="border:none;padding:1px 3px;">0x80072af9</td></tr>
<tr><th style="border:none;padding:1px 3px;">Requested URL</th><td style="border:none;padding:1px 3px;">http://localhost:80/My.Virtual.Directory/Service.asmx</td></tr>
<tr><th style="border:none;padding:1px 3px;">Physical Path</th><td style="border:none;padding:1px 3px;">C:\inetpub\wwwroot\My.Virtual.Directory\Service.asmx</td></tr>
<tr><th style="border:none;padding:1px 3px;">Logon Method</th><td style="border:none;padding:1px 3px;">Not yet determined</td></tr>
<tr><th style="border:none;padding:1px 3px;">Logon User</th><td style="border:none;padding:1px 3px;">Not yet determined</td></tr>
</table>

<p>The errors suggested that we have problems with the configuration file, but the web.config was present (and well-formed), and there were no obvious permission problems, so it seems the file was being read. There was nothing in the event logs. Web searches yielded nothing that matched the <code>0x80072af9</code> error code or the description of the error. Even ERR.exe, recommended by <a href="http://blogs.iis.net/webtopics/archive/2010/03/08/troubleshooting-http-500-19-errors-in-iis-7.aspx">Troubleshooting HTTP 500.19 Errors in IIS 7</a>, failed me.</p>
<p>Fortunately, there were sibling virtual directories on the server, and they were working fine, even under the same App Pool. I knew that this virtual directory, unlike the others, restricted access to a whitelist of IP addresses. So, I changed the <code>security/ipSecurity</code> node's <code>allowUnlisted</code> to <code>true</code>, just in case for some reason the clients' IP addresses weren't being detected properly. No change.</p>
<p>Frustrated, I removed the whole <code>security</code> node. The service worked!</p>
<p>So I took a closer look at the node:</p>
<pre><code class="xml">&lt;security&gt;
  &lt;ipSecurity allowUnlisted="false"&gt;
    &lt;add ipAddress="127.0.0.1" allowed="true" /&gt;
    &lt;add ipAddress="1.2.3.4 " allowed="true" /&gt;
  &lt;/ipSecurity&gt;
&lt;/security&gt;</code></pre>

<p>Check out that "1.2.3.4" ipAddress. Now check it again. It's actually
"1.2.3.4<b> </b>", with a space at the end. (I bolded the space there,
just so you wouldn't miss it.) It seems that this messes up the IP
parsing, and IIS is completely flummoxed. Remove the space, and all is
well.</p>
<!-- /content -->
      <footer>
        <p class="m-transition">~ <i class="fas fa-hippo"></i> ~</p>
      </footer>
    </article>
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Blair Conrad. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>