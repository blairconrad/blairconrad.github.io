<!DOCTYPE html>
<html lang="en"     prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml" >

<head>
    <title>Watch your spaces - HTTP Error 500.19 - Internal Server Error - Blair Conrad</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://blairconrad.com/2013/07/02/watch-your-spaces-http-error-500.19-internal-server-error/">

        <meta name="author" content="Blair Conrad" />
        <meta name="keywords" content="500-19,iis,iis7" />
        <meta name="description" content="Late last week at the Day Job, a colleague came to me with a problem. The web service he was trying to hit was throwing an error he&#39;d never seen before: HTTP Error 500.19 - Internal Server Error The requested page cannot be accessed because the related configuration data for …" />

        <meta property="og:site_name" content="Blair Conrad" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Watch your spaces - HTTP Error 500.19 - Internal Server Error"/>
        <meta property="og:url" content="https://blairconrad.com/2013/07/02/watch-your-spaces-http-error-500.19-internal-server-error/"/>
        <meta property="og:description" content="Late last week at the Day Job, a colleague came to me with a problem. The web service he was trying to hit was throwing an error he&#39;d never seen before: HTTP Error 500.19 - Internal Server Error The requested page cannot be accessed because the related configuration data for …"/>
        <meta property="article:published_time" content="2013-07-02" />
            <meta property="article:section" content="Development" />
            <meta property="article:tag" content="500-19" />
            <meta property="article:tag" content="iis" />
            <meta property="article:tag" content="iis7" />
            <meta property="article:author" content="Blair Conrad" />



    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://blairconrad.com/theme/css/bootstrap.min.css" type="text/css" />

    <link href="https://blairconrad.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blairconrad.com/theme/css/pygments/github.css"
        rel="stylesheet">
    <link href="https://blairconrad.com/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blairconrad.com/theme/css/style.css" type="text/css" />
    <link href="https://blairconrad.com/theme/css/custom.css" rel="stylesheet">

    <link href="https://blairconrad.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
        title="Blair Conrad ATOM Feed" />

    <link href="https://blairconrad.com/feeds/development.atom.xml" type="application/atom+xml" rel="alternate"
        title="Blair Conrad Development ATOM Feed" />
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top"
        role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="https://blairconrad.com/" class="navbar-brand">
Blair Conrad                </a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/Recipes">Recipes</a></li>
                        <li class="active" >
                            <a href="https://blairconrad.com/category/development.html">Development</a>
                        </li>
                        <li >
                            <a href="https://blairconrad.com/category/miscellany.html">Miscellany</a>
                        </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><span>
                            <form class="navbar-search" action="/search.html">
                                <input type="text" class="search-query" placeholder="Search" name="q"
                                    id="tipue_search_input" required>
                            </form>
                        </span>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </div> <!-- /.navbar -->

    <!-- Banner -->
    <!-- End Banner -->

    <!-- Content Container -->
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blairconrad.com/2013/07/02/watch-your-spaces-http-error-500.19-internal-server-error/"
                       rel="bookmark"
                       title="Permalink to Watch your spaces - HTTP Error 500.19 - Internal Server Error">
                        Watch your spaces - HTTP Error 500.19 - Internal Server Error
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span><i class="fa fa-calendar"></i><time datetime="2013-07-02T00:00:00-04:00">2013-07-02</time></span>
    <span><i class="fa fa-folder"></i><a href="https://blairconrad.com/category/development.html"></i>Development</a></span>


<span><i class="fa fa-tags"></i>
<a href="https://blairconrad.com/tag/500-19.html">500-19</a>
/
<a href="https://blairconrad.com/tag/iis.html">iis</a>
/
<a href="https://blairconrad.com/tag/iis7.html">iis7</a>
</span>
    

</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Late last week at the Day Job, a colleague came to me with a problem. The web service he was trying to hit was throwing an error he'd never seen before:</p>
<blockquote style="color:#CC0000;">
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid.
</blockquote>

<p>I'd never seen it before either, at least not in this exact incarnation. Take a look</p>
<p><a href="https://blairconrad.com/images/500-191-internal-server-error.png"><img style="display: block; margin-left: auto; margin-right: auto;" src="https://blairconrad.com/images/500-191-internal-server-error-small.png" alt="screenshot of 500.19 error" width="500" height="334" /></a></p>
<!--more-->

<p>In case the text isn't so clear, here are the details:</p>
<table style="border-collapse:collapse;border:1px solid black;width:50%;margin-left:25%;margin-right:25%;">
<colgroup>
  <col style="background-color:#F8F8F8;" />
  <col/>
</colgroup>
<tr><th style="border:none;padding:1px 3px;">Module</th><td style="border:none;padding:1px 3px;">IpRestrictionModule</td></tr>
<tr><th style="border:none;padding:1px 3px;">Notification</th><td style="border:none;padding:1px 3px;">BeginRequest</td></tr>
<tr><th style="border:none;padding:1px 3px;">Handler</th><td style="border:none;padding:1px 3px;">WebServiceHandlerFactory-Integrated-4.0</td></tr>
<tr><th style="border:none;padding:1px 3px;">Error Code</th><td style="border:none;padding:1px 3px;">0x80072af9</td></tr>
<tr><th style="border:none;padding:1px 3px;">Requested URL</th><td style="border:none;padding:1px 3px;">http://localhost:80/My.Virtual.Directory/Service.asmx</td></tr>
<tr><th style="border:none;padding:1px 3px;">Physical Path</th><td style="border:none;padding:1px 3px;">C:\inetpub\wwwroot\My.Virtual.Directory\Service.asmx</td></tr>
<tr><th style="border:none;padding:1px 3px;">Logon Method</th><td style="border:none;padding:1px 3px;">Not yet determined</td></tr>
<tr><th style="border:none;padding:1px 3px;">Logon User</th><td style="border:none;padding:1px 3px;">Not yet determined</td></tr>
</table>

<p>The errors suggested that we have problems with the configuration file, but the web.config was present (and well-formed), and there were no obvious permission problems, so it seems the file was being read. There was nothing in the event logs. Web searches yielded nothing that matched the <code>0x80072af9</code> error code or the description of the error. Even ERR.exe, recommended by <a href="http://blogs.iis.net/webtopics/archive/2010/03/08/troubleshooting-http-500-19-errors-in-iis-7.aspx">Troubleshooting HTTP 500.19 Errors in IIS 7</a>, failed me.</p>
<p>Fortunately, there were sibling virtual directories on the server, and they were working fine, even under the same App Pool. I knew that this virtual directory, unlike the others, restricted access to a whitelist of IP addresses. So, I changed the <code>security/ipSecurity</code> node's <code>allowUnlisted</code> to <code>true</code>, just in case for some reason the clients' IP addresses weren't being detected properly. No change.</p>
<p>Frustrated, I removed the whole <code>security</code> node. The service worked!</p>
<p>So I took a closer look at the node:</p>
<pre><code class="xml">&lt;security&gt;
  &lt;ipSecurity allowUnlisted="false"&gt;
    &lt;add ipAddress="127.0.0.1" allowed="true" /&gt;
    &lt;add ipAddress="1.2.3.4 " allowed="true" /&gt;
  &lt;/ipSecurity&gt;
&lt;/security&gt;</code></pre>

<p>Check out that "1.2.3.4" ipAddress. Now check it again. It's actually
"1.2.3.4<b> </b>", with a space at the end. (I bolded the space there,
just so you wouldn't miss it.) It seems that this messes up the IP
parsing, and IIS is completely flummoxed. Remove the space, and all is
well.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

            </div>
        </div>
    </div>
    <!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Blair Conrad
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
    <script src="https://blairconrad.com/theme/js/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://blairconrad.com/theme/js/bootstrap.min.js"></script>

    <!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
    <script src="https://blairconrad.com/theme/js/respond.min.js"></script>




</body>

</html>