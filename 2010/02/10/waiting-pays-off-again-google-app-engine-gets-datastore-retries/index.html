<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>Waiting pays off again - Google App Engine gets Datastore retries | Blair Conrad</title>
  <link rel="stylesheet" href="https://blairconrad.com/static/m-dark.compiled.css" />
  <link rel="stylesheet" href="https://blairconrad.com/static/site.css" />
  <link rel="canonical" href="https://blairconrad.com/2010/02/10/waiting-pays-off-again-google-app-engine-gets-datastore-retries/" />
  <link href="https://blairconrad.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Blair Conrad" />
  <link href="https://blairconrad.com/feeds/development.atom.xml" type="application/atom+xml" rel="alternate" title="Blair Conrad | Development" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
  <meta property="og:site_name" content="Blair Conrad" />
  <meta property="og:title" content="Waiting pays off again - Google App Engine gets Datastore retries" />
  <meta name="twitter:title" content="Waiting pays off again - Google App Engine gets Datastore retries" />
  <meta property="og:url" content="https://blairconrad.com/2010/02/10/waiting-pays-off-again-google-app-engine-gets-datastore-retries/" />
  <meta property="og:description" content="Sometimes when we wait a little, the universe provides for us. Last year, I was holding off taking LibraryHippo live because it&#39;s almost useless without daily notifications. At the time, Google App Engine had no scheduled tasks. I&#39;d just resigned myself to soliciting users and setting up a cron job …" />
  <meta name="twitter:description" content="Sometimes when we wait a little, the universe provides for us. Last year, I was holding off taking LibraryHippo live because it&#39;s almost useless without daily notifications. At the time, Google App Engine had no scheduled tasks. I&#39;d just resigned myself to soliciting users and setting up a cron job …" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="https://blairconrad.com/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m">Blair Conrad</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-12 m-col-m-none">
            <li><a href="https://blairconrad.com/Recipes/">Recipes</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="m-col-m-12 m-nopadb">
      
      <header>
          <h1><a href="https://blairconrad.com/2010/02/10/waiting-pays-off-again-google-app-engine-gets-datastore-retries/" rel="bookmark" title="Permalink to Waiting pays off again - Google App Engine gets Datastore retries">
                  Waiting pays off again - Google App Engine gets Datastore retries
              </a></h1>
              <div class="article-metadata">
                <span><i class="fas fa-calendar"></i><time
                    datetime="2010-02-10T00:00:00-05:00">2010-02-10</time></span>
                <span><i class="fas fa-folder"></i><a
                    href="https://blairconrad.com/category/development.html"></i>Development</a></span>
                <span><i class="fas fa-tags"></i>
                  <a href="https://blairconrad.com/tag/appengine.html">AppEngine</a>
                  /
                  <a href="https://blairconrad.com/tag/development.html">Development</a>
                </span>
              </div>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<p>Sometimes when we wait a little, the universe provides for us. Last year, I was holding off taking LibraryHippo live because it's almost useless without daily notifications. At the time, Google App Engine had no scheduled tasks. I'd just resigned myself to soliciting users and setting up a cron job on one of my own computers to trigger the notifications, or use some other kind of hackery. Right after I made this decision, the Google App Engine team announced that Scheduled Tasks were available. Well, it's happened again.</p>

<p>I really enjoy working on the Google App Engine framework, but one of the more frustrating aspects (lately) has been the timeouts I get when reading from the Datastore. I've recently taken some steps that will reduce the impact on users, but was on the verge of implementing an automatic Datastore retry mechanism.
Fortunately, it looks like I may not have to, with the <a href="http://googleappengine.blogspot.com/2010/02/app-engine-sdk-131-including-major.html">arrival of App Engine SDK 1.3.1</a>:</p>

<blockquote>
<p>"App Engine now automatically retries all datastore calls (with the exception of transaction commits) when your applications encounters a datastore error caused by being unable to reach Bigtable. Datastore retries automatically builds in what many of you have been doing in your code already, and our tests have shown it drastically reduces the number of errors your application experiences (by up to 3-4x error reduction for puts, 10-30x for gets)."</p>
</blockquote>
<p>There are other Datastore improvements, including Datastore Query Cursors, and unlimited result set size for queries (previously the maximum was 1000). Also <a href="http://code.google.com/appengine/docs/python/tools/appstats.html">instrumentation</a> for the Python version of the SDK, and unit tests for Java.</p>
<p>I'm keen to try out the Python instrumentation, but I'm pretty sure I already know where my bottleneck is...</p>
<!-- /content -->
      <footer>
        <p class="m-transition">~ <i class="fas fa-hippo"></i> ~</p>
      </footer>
    </article">
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Blair Conrad. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>